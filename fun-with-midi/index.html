<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><style data-href="/tech-blog/styles.d01268442667a6e70e23.css" id="gatsby-global-css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/tech-blog/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/tech-blog/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/tech-blog/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/tech-blog/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/tech-blog/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/tech-blog/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/tech-blog/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/tech-blog/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/tech-blog/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/tech-blog/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/tech-blog/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/tech-blog/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/tech-blog/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/tech-blog/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/tech-blog/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/tech-blog/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/tech-blog/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/tech-blog/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/tech-blog/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/tech-blog/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/tech-blog/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/tech-blog/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/tech-blog/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/tech-blog/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/tech-blog/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/tech-blog/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/tech-blog/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/tech-blog/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}figcaption{text-align:center;font-size:.9em;margin:0}ul{margin-left:1rem}footer{flex-wrap:wrap;font-size:.8em}footer,footer>span{display:flex;align-items:center}footer>span{margin-top:1rem}</style><meta name="generator" content="Gatsby 2.32.13"/><link rel="alternate" type="application/rss+xml" href="/tech-blog/rss.xml"/><title data-react-helmet="true">Fun with MIDI | Tech Blog</title><meta data-react-helmet="true" name="description" content="Playing with MIDI circuits and code for beginners."/><meta data-react-helmet="true" property="og:title" content="Fun with MIDI"/><meta data-react-helmet="true" property="og:description" content="Playing with MIDI circuits and code for beginners."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Matthew Curtis"/><meta data-react-helmet="true" name="twitter:title" content="Fun with MIDI"/><meta data-react-helmet="true" name="twitter:description" content="Playing with MIDI circuits and code for beginners."/><link as="script" rel="preload" href="/tech-blog/webpack-runtime-8d0336b80544e4bef822.js"/><link as="script" rel="preload" href="/tech-blog/framework-9d2233ab751940aaa81d.js"/><link as="script" rel="preload" href="/tech-blog/app-e3eee7d533645186be7b.js"/><link as="script" rel="preload" href="/tech-blog/styles-0ec71dd62c66cb95665c.js"/><link as="script" rel="preload" href="/tech-blog/cd7d5f864fc9e15ed8adef086269b0aeff617554-6f0ceaa7fa113bb775cf.js"/><link as="script" rel="preload" href="/tech-blog/component---src-templates-blog-post-js-682f08cb5b5383fbfa1b.js"/><link as="fetch" rel="preload" href="/tech-blog/page-data/fun-with-midi/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/tech-blog/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/tech-blog/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header><h3 style="font-family:Montserrat, sans-serif;margin-top:0"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/tech-blog/">Tech Blog</a></h3></header><main><article><header><h1 style="margin-top:1.75rem;margin-bottom:0">Fun with MIDI</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem">February 27, 2025</p></header><section><p>This was originally written for a zine. Code, schematics, etc can be <a href="https://github.com/handeyeco/fun-with-midi">found on Github</a>.</p>
<hr>
<p>Hey 👋 My name is Matthew and I don’t understand analog circuits.</p>
<p>Boy have I tried though. Just looking around my desk I can see my copy of There Are No Electrons by Amdahl, Practical Electronics For Inventors by Scherz, and Electronic Projects For Musicians by Anderton. My degree is in Music Business, Performance, and Technology and I’ve worked TWO jobs assembling modular synthesizers - one before and one after my career as an audio engineer, before I made the switch to software development.</p>
<p>Circuits are hard. I discovered something though - on my 100th attempt at learning electrical engineering - that there’s buckets of fun to be had with a relatively simple circuit and some basic programming skills.</p>
<p>In this article I’m going to talk a little about MIDI.</p>
<h2>WARNING</h2>
<p>Your hearing is fragile, be sure to protect it when programmatically adjusting audio. I recommend getting some cheap, small speakers from a thrift store to use while debugging. Always start each iteration with your volume turned down and carefully turn the volume up when you’re confident your project is working.</p>
<p>You can always fix bugs, but you can’t fix tinnitus!</p>
<h2>What we’re doing</h2>
<p>We’re going to use an Arduino and a simple MIDI out circuit for three sketches:</p>
<ol>
<li>To get things started, we’ll run a sketch that makes sure all the buttons, potentiometers, and LEDs are working.</li>
<li>Then we’ll test our MIDI out circuit by making a vanilla MIDI CC controller that lets us pick a MIDI CC and a value for that CC.</li>
<li>Finally we’ll look at a more creative application of MIDI by making a random MIDI CC generator that can be used to turn boring synth patches into modular-like bleeps and bloops.</li>
</ol>
<p>Each sketch will build on the previous sketch so hopefully by the end you can take these ideas and build your own weird MIDI tool!</p>
<h2>What I’m using</h2>
<p>For these examples I’m using an Arduino Mega ($50; an Uno should work fine though) and the Sparkfun MIDI Shield ($24). Arduino is designed to be a beginner-friendly platform for people who are learning about microcontrollers. Shields are just circuits that are meant to extend the functionality of another circuit.</p>
<p>If you want to follow along and have the cash, I highly recommend throwing some dough at both Arduino and Sparkfun - they contribute a lot to the DIY scene. However you can get equally far with a $10 Arduino knock-off and some common components.</p>
<h2>The circuit</h2>
<p>Even though MIDI in makes everything more fun, for the sake of simplicity I’m just using MIDI out, two potentiometers, three buttons, and two LEDs. You can see the Sparkfun MIDI Shield schematic on their site, but the parts I’m using for these examples are:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/tech-blog/static/7e995fa6d909c88a421c98c0552175cf/b85c3/simplified-schematic.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 64.1891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACT0lEQVQ4y31T227TQBTM//8OpaKolQgIVeKtSA1KaRLXsddee2/ei21oyzB2mpK+8HC0sXM8Zy5nFyk5/K/63sF5DR8Mhr5DZIXp/WuPnU/b6flc9Gw4rTeAfcAwJoLZuSLfaV2hFg8YBj/3t10FaySca+bnxTQhntSRVeIH0eaw4hZNfoOuvUeIFo6AqtjC9waJrFvJnk5BZnfQPBdaCdRNBqn2rByGz4Fs+uDhqiWHXMCGj/zwCkFLDL8i4uigjECzXkHdrdBm99BNQWsMFpb+2FbAqppg1TyxdgJSZNiszhCfPuEJXyCqS9iqRD/6g4rUoZMEofzoFK2JB8mT0TbIuVpf0hNWJKDMkK/f4xmf8chq6ksyFhjJcCDY5KdyLfK6gCapY0iLaVKgd3727+BhGtjMxmJ9TsAl/pChbS6hxA62VxzewIUWykt00czezr4fU/aM3JH2NN1HJknDRblFRslPBAS+otidQdyv4UaNhio8QbrYEljN8lM6BYwKjc7RFhml5XjY3KLcb3F3845yl0jPS2y3Z1C7DOPvBEOGHRONHKydRD8z7E4Ak4HpJJQsYW3Dmn4LhnLwMBJwv/8As8/RPyZo+ltv1/S8RbNZoWao6RXwxUNtGUT5wJQLlJsfMJ5S9DXX4xzCXEDXV3A1QyGgJ4DcUT6ZaQI33I5XhodFJiiTkiJHpJSg63lidBXKn99QZN+hpx3lf47LPH1jqGLk8hsmHRnMG8Aj6DCGwxUcXnZtCJDTtWJQxtv5JnQEnFZmAp56pzPGf3f7L26X1Abi2SjOAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Schematic of MIDI out circuit with simple controls"
        title="Schematic of MIDI out circuit with simple controls"
        src="/tech-blog/static/7e995fa6d909c88a421c98c0552175cf/fcda8/simplified-schematic.png"
        srcset="/tech-blog/static/7e995fa6d909c88a421c98c0552175cf/12f09/simplified-schematic.png 148w,
/tech-blog/static/7e995fa6d909c88a421c98c0552175cf/e4a3f/simplified-schematic.png 295w,
/tech-blog/static/7e995fa6d909c88a421c98c0552175cf/fcda8/simplified-schematic.png 590w,
/tech-blog/static/7e995fa6d909c88a421c98c0552175cf/efc66/simplified-schematic.png 885w,
/tech-blog/static/7e995fa6d909c88a421c98c0552175cf/c83ae/simplified-schematic.png 1180w,
/tech-blog/static/7e995fa6d909c88a421c98c0552175cf/b85c3/simplified-schematic.png 2580w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<ul>
<li>MIDI out, which is just a 5 pin DIN socket with two resistors</li>
<li>Two potentiometers acting as voltage dividers going into analog pins on the Arduino</li>
<li>Three switches going into digital pins on the Arduino (we’ll be using the internal pull-up resistors)</li>
<li>Two LEDs with current limiting resistors</li>
</ul>
<p>If you’ve been playing with electronics already, there’s a good chance you have most of this stuff lying around except maybe the Arduino and the DIN socket (using a 3.5mm jack for TRS MIDI is also an option).</p>
<h2>Sketch #1: Board Test</h2>
<p><a href="https://github.com/handeyeco/fun-with-midi/blob/main/board-test/board-test.ino">Source code</a></p>
<p>This first sketch is just testing the pots, buttons, and LEDs. First we let the program know which pins we’re using for everything:</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token comment">// button pins (digital)</span>
byte S3_PIN <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
byte S4_PIN <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
byte S5_PIN <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">// pot pins (analog)</span>
byte RV1_PIN <span class="token operator">=</span> A1<span class="token punctuation">;</span>
byte RV2_PIN <span class="token operator">=</span> A0<span class="token punctuation">;</span>

<span class="token comment">// LED pins (digital)</span>
byte GRN_LED_PIN <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
byte RED_LED_PIN <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span></code></pre></div>
<p>Then we declare some variables so we can keep track of what everything is doing as the sketch runs:</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token comment">// declare read state</span>
<span class="token keyword">bool</span> S3_STATE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> S4_STATE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> S5_STATE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> RV1_STATE <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> RV2_STATE <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">setup</code> is the code that runs at the beginning of the sketch:</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// setup for printing to our monitor</span>
  Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">9600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// the switches use the built-in pull-up resistors</span>
  <span class="token function">pinMode</span><span class="token punctuation">(</span>S3_PIN<span class="token punctuation">,</span> INPUT_PULLUP<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">pinMode</span><span class="token punctuation">(</span>S4_PIN<span class="token punctuation">,</span> INPUT_PULLUP<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">pinMode</span><span class="token punctuation">(</span>S5_PIN<span class="token punctuation">,</span> INPUT_PULLUP<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// the pots don't use the pull-up resistors</span>
  <span class="token function">pinMode</span><span class="token punctuation">(</span>RV1_PIN<span class="token punctuation">,</span> INPUT<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">pinMode</span><span class="token punctuation">(</span>RV2_PIN<span class="token punctuation">,</span> INPUT<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// then set up the LEDs as outputs</span>
  <span class="token function">pinMode</span><span class="token punctuation">(</span>GRN_LED_PIN<span class="token punctuation">,</span> OUTPUT<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">pinMode</span><span class="token punctuation">(</span>RED_LED_PIN<span class="token punctuation">,</span> OUTPUT<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// do an initial read of everything</span>
  <span class="token comment">// so we can start looking for changes</span>
  S3_STATE <span class="token operator">=</span> <span class="token function">digitalRead</span><span class="token punctuation">(</span>S3_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>
  S4_STATE <span class="token operator">=</span> <span class="token function">digitalRead</span><span class="token punctuation">(</span>S4_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>
  S5_STATE <span class="token operator">=</span> <span class="token function">digitalRead</span><span class="token punctuation">(</span>S5_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>
  RV1_STATE <span class="token operator">=</span> <span class="token function">analogRead</span><span class="token punctuation">(</span>RV1_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>
  RV2_STATE <span class="token operator">=</span> <span class="token function">analogRead</span><span class="token punctuation">(</span>RV2_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">loop</code> runs over and over again so we can watch for changes:</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token comment">// pot change threshold,</span>
<span class="token comment">// for what we consider a change</span>
<span class="token keyword">int</span> RV_THRESH <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// read pins</span>
  <span class="token keyword">bool</span> S3_READ <span class="token operator">=</span> <span class="token function">digitalRead</span><span class="token punctuation">(</span>S3_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">bool</span> S4_READ <span class="token operator">=</span> <span class="token function">digitalRead</span><span class="token punctuation">(</span>S4_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">bool</span> S5_READ <span class="token operator">=</span> <span class="token function">digitalRead</span><span class="token punctuation">(</span>S5_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> RV1_READ <span class="token operator">=</span> <span class="token function">analogRead</span><span class="token punctuation">(</span>RV1_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> RV2_READ <span class="token operator">=</span> <span class="token function">analogRead</span><span class="token punctuation">(</span>RV2_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// if any button is pressed, light LED</span>
  <span class="token keyword">bool</span> pressed <span class="token operator">=</span> S3_READ <span class="token operator">&amp;&amp;</span> S4_READ <span class="token operator">&amp;&amp;</span> S5_READ<span class="token punctuation">;</span>
  <span class="token function">digitalWrite</span><span class="token punctuation">(</span>GRN_LED_PIN<span class="token punctuation">,</span> pressed<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">digitalWrite</span><span class="token punctuation">(</span>RED_LED_PIN<span class="token punctuation">,</span> pressed<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// print and update state</span>
  <span class="token comment">// if a change is detected</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>S3_READ <span class="token operator">!=</span> S3_STATE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"S3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    S3_STATE <span class="token operator">=</span> S3_READ<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>S4_READ <span class="token operator">!=</span> S4_STATE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"S4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    S4_STATE <span class="token operator">=</span> S4_READ<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>S5_READ <span class="token operator">!=</span> S5_STATE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"S5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    S5_STATE <span class="token operator">=</span> S5_READ<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>RV1_READ <span class="token operator">-</span> RV1_STATE<span class="token punctuation">)</span> <span class="token operator">></span> RV_THRESH<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"RV1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    RV1_STATE <span class="token operator">=</span> RV1_READ<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>RV2_READ <span class="token operator">-</span> RV2_STATE<span class="token punctuation">)</span> <span class="token operator">></span> RV_THRESH<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"RV2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    RV2_STATE <span class="token operator">=</span> RV2_READ<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>What it’s doing:</p>
<ol>
<li>If any buttons are pressed, light up the LEDs</li>
<li>If any button is pressed, print in the serial monitor which button was pressed</li>
<li>If any pot is turned, print in the serial monitor which pot was turned</li>
</ol>
<p>Okay, not super fun so far, but hopefully we have a working Arduino connected to a working MIDI shield. Now let’s actually <em>do</em> something with the MIDI output.</p>
<h2>Serial, USB, and MIDI</h2>
<p>Okay, here’s some bummer news: the <code class="language-text">Serial</code> protocol we used to print messages in the previous example doesn’t play well with hardware MIDI. The problem is that both USB communication and hardware MIDI rely on UART (connected to the TX/RX pins). This is why the MIDI shield has a prog/run switch: when we’re sending our sketch to the Arduino, we can’t also be receiving MIDI or our bits will get all mixed up. The switch turns off MIDI in while we program the microcontroller.</p>
<p>This isn’t a huge issue for now since we’re only using MIDI out, but it’s something to keep in mind. It does however limit our ability to use <code class="language-text">Serial.print</code> while also using MIDI.</p>
<p>The good news is that some Arduinos have multiple UARTs; for example the Mega has 4 sets of UART pins. This means you can use one set for programming/debugging and one set for MIDI. Unfortunately the MIDI shield is designed to work with the Uno too, which only has one set, so the issues exists with the shield on the Mega.</p>
<p>So:</p>
<ol>
<li>We won’t use <code class="language-text">Serial.print</code> while also using MIDI</li>
<li>If we have something plugged into MIDI in, we’ll use the prog/run switch to disconnect it while programming our Arduino</li>
<li>If in the future we design our own circuits, we’ll use a microcontroller with multiple UARTS so MIDI can be on its own</li>
</ol>
<h2>Sketch #2: MIDI CC Controller</h2>
<p><a href="https://github.com/handeyeco/fun-with-midi/blob/main/cc-controller/cc-controller.ino">Source code</a></p>
<p>I’m not going to explain MIDI or MIDI CC in a lot of detail. You have access to the internet. I’m just going to say that MIDI is how digital music devices communicate with one another and MIDI CC is how we control parameters on one device from another device.</p>
<p>This script will give us the power to change parameters on a remote device from our Arduino. Imagine being able to change the filter cutoff on your synth from the other side of the room - that <em>can</em> be a reality for you!</p>
<p>The code is much more concise as it takes the last example and cuts a lot away from it. We’re only going to use the pots here:</p>
<ul>
<li>One pot will control which CC we’re modifying. For instance on the Hydrasynth, filter 1 cutoff is MIDI CC 74 and LFO 1 rate is MIDI CC 72. Your synth’s manual should tell you what CC controls what parameter.</li>
<li>The other pot will control the value of the MIDI CC. Most of MIDI works with 7 bits which gives us a range between 0 and 127 (128 steps).</li>
</ul>
<p>First we import <a href="https://github.com/FortySevenEffects/arduino_midi_library">FortySevenEffects’ MIDI library</a> and initialize it:</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;MIDI.h></span></span>

<span class="token function">MIDI_CREATE_DEFAULT_INSTANCE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>We set pins and initalize state like before; this time though we also have to start the MIDI library. Additionally I’ve added a helper function to map 0-1023 (the full range that an Arduino’s <code class="language-text">analogRead</code> can supply) to 0-127 (the full range that MIDI can use).</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token comment">// pot pins</span>
byte RV1_PIN <span class="token operator">=</span> A1<span class="token punctuation">;</span>
byte RV2_PIN <span class="token operator">=</span> A0<span class="token punctuation">;</span>

<span class="token comment">// declare read state</span>
<span class="token keyword">int</span> RV1_STATE <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> RV2_STATE <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">read_and_map</span><span class="token punctuation">(</span>byte pin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> read <span class="token operator">=</span> <span class="token function">analogRead</span><span class="token punctuation">(</span>pin<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">map</span><span class="token punctuation">(</span>read<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1023</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  MIDI<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span>MIDI_CHANNEL_OMNI<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// set pin modes</span>
  <span class="token function">pinMode</span><span class="token punctuation">(</span>RV1_PIN<span class="token punctuation">,</span> INPUT<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">pinMode</span><span class="token punctuation">(</span>RV2_PIN<span class="token punctuation">,</span> INPUT<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// initialize read state</span>
  RV1_STATE <span class="token operator">=</span> <span class="token function">read_and_map</span><span class="token punctuation">(</span>RV1_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>
  RV2_STATE <span class="token operator">=</span> <span class="token function">read_and_map</span><span class="token punctuation">(</span>RV2_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Now the juicy bit:</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token comment">// there are 16 MIDI channels,</span>
<span class="token comment">// I just used the first one</span>
byte MIDI_CH <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// read pins</span>
  <span class="token keyword">int</span> RV1_READ <span class="token operator">=</span> <span class="token function">read_and_map</span><span class="token punctuation">(</span>RV1_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> RV2_READ <span class="token operator">=</span> <span class="token function">read_and_map</span><span class="token punctuation">(</span>RV2_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// RV1 adjusts which CC channel we're changing</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>RV1_READ <span class="token operator">!=</span> RV1_STATE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    RV1_STATE <span class="token operator">=</span> RV1_READ<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// RV2 adjusts the CC value</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>RV2_READ <span class="token operator">!=</span> RV2_STATE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    RV2_STATE <span class="token operator">=</span> RV2_READ<span class="token punctuation">;</span>
    <span class="token comment">// sendControlChange(CC, value, channel)</span>
    MIDI<span class="token punctuation">.</span><span class="token function">sendControlChange</span><span class="token punctuation">(</span>RV1_STATE<span class="token punctuation">,</span> RV2_STATE<span class="token punctuation">,</span> MIDI_CH<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>What this sketch does:</p>
<ul>
<li>It watches for changes on the RV1 potentiometer and if it changes we change the MIDI CC we’re going to adjust</li>
<li>It watches for changes on the RV2 potentiometer and if it changes we send a MIDI CC message to our MIDI output using the MIDI CC from RV1 and the value from RV2</li>
</ul>
<p>In theory we could use RV1 to go to MIDI CC 74 then use RV2 to adjust the filter cutoff on our Hydrasynth. Or use RV1 to go to MIDI CC 81 then use RV2 to adjust envelope 1 attack.</p>
<p>In practice this is a little tough because we don’t have a display to tell us what MIDI CC we’re on. For now we could use an app like MIDI Monitor to see our work in action and later we could add a cheap I2C OLED screen to tell us what’s happening.</p>
<h2>Sketch #3: Random CC</h2>
<p><a href="https://github.com/handeyeco/fun-with-midi/blob/main/random-cc/random-cc.ino">Source code</a></p>
<p>Let’s go one step further and make something that’s actually fun to use without adding a screen or connecting it to a computer. Modular folks think they have all the fun with their bleeps and their bloops and their endless modulation options, but now that we know we can control synths using MIDI CC, we can make our own obnoxious sounds!</p>
<p>Here’s what this sketch is going to do:</p>
<ul>
<li>We’re going to pick a MIDI CC and start sending it random values.</li>
<li>RV2 will determine how often we send a random value: really fast or really slow.</li>
<li>
<p>RV1 will do different things based on the buttons:</p>
<ul>
<li>When we press S3 we’ll turn off all the LEDs and RV1 will change the offset of the MIDI CC. MIDI CC works between 0 and 127; offset will set the lowest possible value our random CC generator will send.</li>
<li>When we press S4 we’ll turn on the green LED and RV1 will now change the depth of the MIDI CC. This essentially will set the highest possible value our random CC generator will send.</li>
<li>When we press S5 we’ll turn on the red LED and RV1 will now change the MIDI CC that we’re sending to. Basically chosing what parameter we want to control.</li>
</ul>
</li>
</ul>
<p>So when “offset” is 0 and “depth” is 127, we’ll get random CCs between 0 and 127. When “offset” is 64 and “depth” is 127, we’ll get random CCs between 64 and 127 (we’ll clamp the maximum output to 127 since that’s the max MIDI CC can handle). When “offset” is 64 and “depth” is 10, we’ll get random CCs between 64 and 74.</p>
<p>So by default we’ll generate random CCs using the full CC range:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/tech-blog/static/06abf80ea7eb47c0ac6039f63969c6d3/26162/wide-scatter.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 62.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA/0lEQVQoz51SQRKEIAzj/6/1oKOWFJZAi5Xd0zoTxdKGNDRd11W3bevY973yKaX8jcQXSQFUVe1BaANGghJq6/bN0Ll2krnfCYemFqidiJsaTkQneavQ8s5Ry5sK7/vu6hAUEFxf8iiCdSAt7mpdHawuUR/JqCK28aUoKNcAV1bdQ/pHhbFYjHw9gMWSh7/Qt393HmrTeZ71bKROACMTK9JgfDyAee4twt5seV6IE4dWshXHS3MbfN/XaZyObjgsuJK6Io/NkdKHzJE4MrnN4HoRY5QeX/kfEX3VkP/cckYfbpIjYMbbV/J3PNaQJ412mJBfRCuO46gi8pPQ/0n4AfqmtpnPAT66AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Scatter plot of a wide CC range"
        title="Scatter plot of a wide CC range"
        src="/tech-blog/static/06abf80ea7eb47c0ac6039f63969c6d3/fcda8/wide-scatter.png"
        srcset="/tech-blog/static/06abf80ea7eb47c0ac6039f63969c6d3/12f09/wide-scatter.png 148w,
/tech-blog/static/06abf80ea7eb47c0ac6039f63969c6d3/e4a3f/wide-scatter.png 295w,
/tech-blog/static/06abf80ea7eb47c0ac6039f63969c6d3/fcda8/wide-scatter.png 590w,
/tech-blog/static/06abf80ea7eb47c0ac6039f63969c6d3/efc66/wide-scatter.png 885w,
/tech-blog/static/06abf80ea7eb47c0ac6039f63969c6d3/c83ae/wide-scatter.png 1180w,
/tech-blog/static/06abf80ea7eb47c0ac6039f63969c6d3/26162/wide-scatter.png 2020w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>But we can narrow that range using offset and depth:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/tech-blog/static/15d52dbcd90e019fd64995ecc836fe69/26162/narrow-scatter.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 62.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAsElEQVQoz61SSRLDIAzL/19LLmHzUmQDTXtgOiXMCOMlQiY+UkoaQtDzPM0ys4rI3ziwgZSIjGybUNsyR33tkE2FOWeVTWUfCtEmUWu9iNZmiaXF3JbqZwC50mF1DSxv3wjxflA4yHJ14lS4w0lxzjdbbnUjj++PGKPGmKYK+gJiUxG7Ist1f8RHbrb8xPvNn+Ij8zAh7Gpsfh2p2XKt1Yh3AJ7b2KwLr+uyS1e1yL0AmXe2jS+bmAwAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Scatter plot of a narrow CC range"
        title="Scatter plot of a narrow CC range"
        src="/tech-blog/static/15d52dbcd90e019fd64995ecc836fe69/fcda8/narrow-scatter.png"
        srcset="/tech-blog/static/15d52dbcd90e019fd64995ecc836fe69/12f09/narrow-scatter.png 148w,
/tech-blog/static/15d52dbcd90e019fd64995ecc836fe69/e4a3f/narrow-scatter.png 295w,
/tech-blog/static/15d52dbcd90e019fd64995ecc836fe69/fcda8/narrow-scatter.png 590w,
/tech-blog/static/15d52dbcd90e019fd64995ecc836fe69/efc66/narrow-scatter.png 885w,
/tech-blog/static/15d52dbcd90e019fd64995ecc836fe69/c83ae/narrow-scatter.png 1180w,
/tech-blog/static/15d52dbcd90e019fd64995ecc836fe69/26162/narrow-scatter.png 2020w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>This code shares a lot from the first two examples, so I’m just going to talk about the important changes. First we initialize some state:</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token comment">// what editing mode we're in:</span>
<span class="token comment">// 0 = offset (no LEDs)</span>
<span class="token comment">// 1 = depth (green LED)</span>
<span class="token comment">// 2 = CC (red LED)</span>
byte RV1_edit_mode <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">// offset is our lowest possible CC</span>
<span class="token keyword">int</span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// depth is how far from</span>
<span class="token comment">// the lowest CC we can go</span>
<span class="token keyword">int</span> depth <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>
<span class="token comment">// the MIDI CC we're sending values for</span>
<span class="token comment">// 74 is commonly the CC for filter cutoff</span>
byte cc <span class="token operator">=</span> <span class="token number">74</span><span class="token punctuation">;</span>

<span class="token comment">// these are used to set our</span>
<span class="token comment">// MIDI message interval</span>
<span class="token keyword">int</span> MIN_SPEED <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> MAX_SPEED <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> speed <span class="token operator">=</span> MAX_SPEED<span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">long</span> last_cc_sent <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code></pre></div>
<p>Next we check each button to see if they have been pressed and if we detect a change we update the mode we’re in, for example:</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp">  byte old_RV1_edit_mode <span class="token operator">=</span> RV1_edit_mode<span class="token punctuation">;</span>

  <span class="token comment">// update edit state if button change detected</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>S3_READ <span class="token operator">!=</span> S3_STATE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    S3_STATE <span class="token operator">=</span> S3_READ<span class="token punctuation">;</span>
    <span class="token comment">// set RV1_edit_mode to offset</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>S3_STATE <span class="token operator">==</span> LOW<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      RV1_edit_mode <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...similar for the other buttons...</span>

  <span class="token comment">// watch for changes to edit mode and update LEDs</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>old_RV1_edit_mode <span class="token operator">!=</span> RV1_edit_mode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">digitalWrite</span><span class="token punctuation">(</span>GRN_LED_PIN<span class="token punctuation">,</span> RV1_edit_mode <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">digitalWrite</span><span class="token punctuation">(</span>RED_LED_PIN<span class="token punctuation">,</span> RV1_edit_mode <span class="token operator">!=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div>
<p>Then we read the pots. For RV1, we update the settings based on what mode we’re in. For RV2, we map the read value between our min/max interval speed:</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp">  <span class="token comment">// if RV1 changes, look at the edit mode</span>
  <span class="token comment">// to determine which setting should be updated</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>RV1_READ <span class="token operator">!=</span> RV1_STATE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    RV1_STATE <span class="token operator">=</span> RV1_READ<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>RV1_edit_mode <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      offset <span class="token operator">=</span> RV1_STATE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>RV1_edit_mode <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      depth <span class="token operator">=</span> RV1_STATE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>RV1_edit_mode <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cc <span class="token operator">=</span> RV1_STATE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// use RV2 to update the speed of the interval</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>RV2_READ <span class="token operator">!=</span> RV2_STATE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    RV2_STATE <span class="token operator">=</span> RV2_READ<span class="token punctuation">;</span>
    <span class="token comment">// we map pot reads from 0-1023 to 0-127 for MIDI</span>
    <span class="token comment">// but now we're mapping 0-127 to MIN/MAX_SPEED</span>
    speed <span class="token operator">=</span> <span class="token function">map</span><span class="token punctuation">(</span>RV2_STATE<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> MIN_SPEED<span class="token punctuation">,</span> MAX_SPEED<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div>
<p>Finally we continuously check to see if the current timestamp minus the timestamp for the last message is larger than our interval; if so, send a new message:</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp">  <span class="token comment">// 1. check the current time</span>
  <span class="token comment">// 2. compare it to the last time we sent a message</span>
  <span class="token comment">// 3. if we're past our interval, send a new message</span>
  <span class="token keyword">unsigned</span> <span class="token keyword">long</span> now <span class="token operator">=</span> <span class="token function">millis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> last_cc_sent <span class="token operator">></span> speed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    last_cc_sent <span class="token operator">=</span> now<span class="token punctuation">;</span>
    <span class="token comment">// max is offset + depth, as long as it's between 0 and 127</span>
    <span class="token keyword">int</span> max_val <span class="token operator">=</span> <span class="token function">constrain</span><span class="token punctuation">(</span>offset <span class="token operator">+</span> depth<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> rand_val <span class="token operator">=</span> <span class="token function">random</span><span class="token punctuation">(</span>offset<span class="token punctuation">,</span> max_val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// sendControlChange(CC, value, channel)</span>
    MIDI<span class="token punctuation">.</span><span class="token function">sendControlChange</span><span class="token punctuation">(</span>cc<span class="token punctuation">,</span> rand_val<span class="token punctuation">,</span> MIDI_CH<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div>
<h2>Adding MIDI in</h2>
<p>Addind MIDI in isn’t too much work either, it’s just that the MIDI specification require the use of an optocoupler to electrically isolate the receiving circuit from the sending circuit. Looking at the Sparkfun schematic, the important pieces are:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/tech-blog/static/fa64f6b8ca55a94a9d5085d5870fc2b3/ec09f/midi-in-schematic.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 87.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACdElEQVQ4y52UW2/TQBCF8///BY9IvEBvqqCCXoKoUNOkLSGRkjqp716vd+31rp205TDehCQtCEgfRmvt2p/PzJydljESRSlQagm9EcYU8DlDmmfggj05W7+T29jca9VVAZeFyHKOulaoCFRVCqUMcTe9ROD0wGIH2p6tPzYUjQi1fF4BMxUjHn4D9x3E2RRhOgUvOfjkHI96H9J5h7vbPp1PwESyVCTsKvMUPIuf/Ki1eoEUsMkA49E1OO2x/gmy4Ssk3deQkQdvdINp4tpSaKNoLVEqgVwyGMpoDdQ5MpZgNjfgRUQRIqcDEfZQiwMkV28QhyNkhoGrCCpPUMTfkTodBMNzsGkHpkjoJ8UCyMdDxP0rCNexwJLUNjXURQqVeSiEDx67mNGe0CmEP8T97Ah6fgRWvqcy7UIlA1JZ2kxbyeAGivnwrroQBNFmWeCmgwRRlEHAI1t4WWXwe21Moj3o+2P8wBk8vg9+11uUgNzSylkA5t7aD8xS9p/s0az1TMO/OIOb7OERp3igiLID8GnXAq3CgMcYRS7cNIQqxW++2oyKgB4BI1IFtC00oTo39VwBNxX8K6qagF9Pl8AzG1IdIhp8IetsAPUzc/5NYZNyQmkugG2I/ABe5yM18hlQ/ycw6LTJ/AuF5uEE03gHfvfYAm1TtgLWJaV8AifcscByfkzXdhdsfLG2zbbAeHiJSB4S8DPk/BPGpDC6IbVGbQ9sfFnQXb9XH+D5O+hP3kKShWTQp8FiXgAkN5SKQ4sAk0Ebzm0HYTyhxjRjLkWusu2AqxlIStPER0kXIZacvMgQ0tSRxQuAvyIiQNPVZnTZqBa37Cf/r063Hh6N2AAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Schematic of MIDI in circuit"
        title="Schematic of MIDI in circuit"
        src="/tech-blog/static/fa64f6b8ca55a94a9d5085d5870fc2b3/fcda8/midi-in-schematic.png"
        srcset="/tech-blog/static/fa64f6b8ca55a94a9d5085d5870fc2b3/12f09/midi-in-schematic.png 148w,
/tech-blog/static/fa64f6b8ca55a94a9d5085d5870fc2b3/e4a3f/midi-in-schematic.png 295w,
/tech-blog/static/fa64f6b8ca55a94a9d5085d5870fc2b3/fcda8/midi-in-schematic.png 590w,
/tech-blog/static/fa64f6b8ca55a94a9d5085d5870fc2b3/efc66/midi-in-schematic.png 885w,
/tech-blog/static/fa64f6b8ca55a94a9d5085d5870fc2b3/c83ae/midi-in-schematic.png 1180w,
/tech-blog/static/fa64f6b8ca55a94a9d5085d5870fc2b3/ec09f/midi-in-schematic.png 1916w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<ul>
<li>R5 is limiting current</li>
<li>R6 is a pull-up resistor</li>
<li>D3 is protection again reverse polarization</li>
<li>The 6N138 is sending the data from two electrically disconnected circuits</li>
</ul>
<p>To have both hardware MIDI in and MIDI out, you’re looking at eight cheap and highly available components (not including the Arduino). No vactrols, no germanium transistors, no archaic ICs you have to source from estate sales.</p>
<h2>Closing thoughts</h2>
<p>The fun thing about this circuit is that you don’t have to control just one thing on one device:</p>
<ul>
<li>Traditional MIDI CC lets you control 127 parameters</li>
<li>MIDI NRPN lets you control 16,383 parameters</li>
<li>Thanks to MIDI channels, you can simultaneously control up to 16 devices</li>
</ul>
<p>We’re not just limited to parameter changes either, with MIDI you can:</p>
<ul>
<li>Control the clock that devices use</li>
<li>Send program changes to jump between patches on the fly</li>
<li>Send traditional notes but also microtonal notes now thanks to MIDI MPE</li>
</ul>
<p>If you’re interested in open-source MIDI projects, be sure to check out:</p>
<ul>
<li><a href="https://monome.org/docs/norns/">Norns</a></li>
<li><a href="https://cs.gmu.edu/~sean/projects/gizmo/">Gizmo</a></li>
<li><a href="https://www.midigoblin.com/">MIDI Goblin</a></li>
<li><a href="https://github.com/pichenettes/midipal">Midipal</a></li>
</ul>
<p>Finally, I’m working on an open-source generative sequencer called <a href="https://github.com/handeyeco/Grandbot">Grandbot</a>.</p></section><hr style="margin-bottom:1.75rem"/><footer><div style="display:flex;margin-bottom:4.375rem"><p>Written by Matthew Curtis - community organizer, artist, and developer in Fayetteville, AR.<!-- --> <!-- -->Here are my <a href="https://h-e.io/">links</a>.</p></div></footer></article><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/tech-blog/nano-midipal/">← <!-- -->Midipal on the Arduino Nano</a></li><li></li></ul></nav></main><footer><span><svg style="height:1rem;width:1rem" version="1.0" id="Layer_1" x="0px" y="0px" width="64px" height="64px" viewBox="5.5 -3.5 64 64" enable-background="new 5.5 -3.5 64 64" xml:space="preserve"><g><circle fill="#FFFFFF" cx="37.785" cy="28.501" r="28.836"></circle><path d="M37.441-3.5c8.951,0,16.572,3.125,22.857,9.372c3.008,3.009,5.295,6.448,6.857,10.314
		c1.561,3.867,2.344,7.971,2.344,12.314c0,4.381-0.773,8.486-2.314,12.313c-1.543,3.828-3.82,7.21-6.828,10.143
		c-3.123,3.085-6.666,5.448-10.629,7.086c-3.961,1.638-8.057,2.457-12.285,2.457s-8.276-0.808-12.143-2.429
		c-3.866-1.618-7.333-3.961-10.4-7.027c-3.067-3.066-5.4-6.524-7-10.372S5.5,32.767,5.5,28.5c0-4.229,0.809-8.295,2.428-12.2
		c1.619-3.905,3.972-7.4,7.057-10.486C21.08-0.394,28.565-3.5,37.441-3.5z M37.557,2.272c-7.314,0-13.467,2.553-18.458,7.657
		c-2.515,2.553-4.448,5.419-5.8,8.6c-1.354,3.181-2.029,6.505-2.029,9.972c0,3.429,0.675,6.734,2.029,9.913
		c1.353,3.183,3.285,6.021,5.8,8.516c2.514,2.496,5.351,4.399,8.515,5.715c3.161,1.314,6.476,1.971,9.943,1.971
		c3.428,0,6.75-0.665,9.973-1.999c3.219-1.335,6.121-3.257,8.713-5.771c4.99-4.876,7.484-10.99,7.484-18.344
		c0-3.543-0.648-6.895-1.943-10.057c-1.293-3.162-3.18-5.98-5.654-8.458C50.984,4.844,44.795,2.272,37.557,2.272z M37.156,23.187
		l-4.287,2.229c-0.458-0.951-1.019-1.619-1.685-2c-0.667-0.38-1.286-0.571-1.858-0.571c-2.856,0-4.286,1.885-4.286,5.657
		c0,1.714,0.362,3.084,1.085,4.113c0.724,1.029,1.791,1.544,3.201,1.544c1.867,0,3.181-0.915,3.944-2.743l3.942,2
		c-0.838,1.563-2,2.791-3.486,3.686c-1.484,0.896-3.123,1.343-4.914,1.343c-2.857,0-5.163-0.875-6.915-2.629
		c-1.752-1.752-2.628-4.19-2.628-7.313c0-3.048,0.886-5.466,2.657-7.257c1.771-1.79,4.009-2.686,6.715-2.686
		C32.604,18.558,35.441,20.101,37.156,23.187z M55.613,23.187l-4.229,2.229c-0.457-0.951-1.02-1.619-1.686-2
		c-0.668-0.38-1.307-0.571-1.914-0.571c-2.857,0-4.287,1.885-4.287,5.657c0,1.714,0.363,3.084,1.086,4.113
		c0.723,1.029,1.789,1.544,3.201,1.544c1.865,0,3.18-0.915,3.941-2.743l4,2c-0.875,1.563-2.057,2.791-3.541,3.686
		c-1.486,0.896-3.105,1.343-4.857,1.343c-2.896,0-5.209-0.875-6.941-2.629c-1.736-1.752-2.602-4.19-2.602-7.313
		c0-3.048,0.885-5.466,2.658-7.257c1.77-1.79,4.008-2.686,6.713-2.686C51.117,18.558,53.938,20.101,55.613,23.187z"></path></g></svg> <!-- -->2025<!-- --> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">BY-NC-SA.</a> </span><span>See a typo?  <a href="https://github.com/handeyeco/tech-blog">File a pull request or issue.</a></span></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/fun-with-midi/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-637fbcf36b8141e442fd.js"],"app":["/app-e3eee7d533645186be7b.js"],"component---src-pages-404-js":["/component---src-pages-404-js-76a9e5bd24650270f882.js"],"component---src-pages-index-js":["/component---src-pages-index-js-2874797e417dec4f9ffd.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-682f08cb5b5383fbfa1b.js"]};/*]]>*/</script><script src="/tech-blog/polyfill-637fbcf36b8141e442fd.js" nomodule=""></script><script src="/tech-blog/component---src-templates-blog-post-js-682f08cb5b5383fbfa1b.js" async=""></script><script src="/tech-blog/cd7d5f864fc9e15ed8adef086269b0aeff617554-6f0ceaa7fa113bb775cf.js" async=""></script><script src="/tech-blog/styles-0ec71dd62c66cb95665c.js" async=""></script><script src="/tech-blog/app-e3eee7d533645186be7b.js" async=""></script><script src="/tech-blog/framework-9d2233ab751940aaa81d.js" async=""></script><script src="/tech-blog/webpack-runtime-8d0336b80544e4bef822.js" async=""></script></body></html>