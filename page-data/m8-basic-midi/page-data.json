{"componentChunkName":"component---src-templates-blog-post-js","path":"/m8-basic-midi/","result":{"data":{"site":{"siteMetadata":{"title":"Tech Blog"}},"markdownRemark":{"id":"33e78daa-d306-5aa8-b973-07a68b614739","excerpt":"I recently picked up a v1 Dirtywave M8 in a trade. While browsing the web, I noticed that the OMX-27 has some macros for controlling things on the M8. I couldn…","html":"<p>I recently picked up a v1 Dirtywave M8 in a trade. While browsing the web, I noticed that the <a href=\"https://www.denki-oto.com/store/p59/omx27-kit.html\">OMX-27</a> has some macros for controlling things on the M8. I couldn’t find an official Dirtywave MIDI implementation chart, so I dug through the <a href=\"https://github.com/okyeron/OMX-27\">OMX-27 code</a> to get the basic idea. Thought I’d share.</p>\n<h2>Implementation Chart</h2>\n<p>Commands are all sent as note on/off messages. The default channel is 10, but I believe that’s configurable in <code class=\"language-text\">Project> MIDI > Settings > CC Map Chan</code> on the M8.</p>\n<table>\n<thead>\n<tr>\n<th>MIDI Note</th>\n<th>Function</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>Play button</td>\n</tr>\n<tr>\n<td>1</td>\n<td>Shift button</td>\n</tr>\n<tr>\n<td>2</td>\n<td>Edit button</td>\n</tr>\n<tr>\n<td>3</td>\n<td>Option button</td>\n</tr>\n<tr>\n<td>4</td>\n<td>Left button</td>\n</tr>\n<tr>\n<td>5</td>\n<td>Right button</td>\n</tr>\n<tr>\n<td>6</td>\n<td>Up button</td>\n</tr>\n<tr>\n<td>7</td>\n<td>Down button</td>\n</tr>\n<tr>\n<td>12</td>\n<td>Track 1 mute</td>\n</tr>\n<tr>\n<td>13</td>\n<td>Track 2 mute</td>\n</tr>\n<tr>\n<td>14</td>\n<td>Track 3 mute</td>\n</tr>\n<tr>\n<td>15</td>\n<td>Track 4 mute</td>\n</tr>\n<tr>\n<td>16</td>\n<td>Track 5 mute</td>\n</tr>\n<tr>\n<td>17</td>\n<td>Track 6 mute</td>\n</tr>\n<tr>\n<td>18</td>\n<td>Track 7 mute</td>\n</tr>\n<tr>\n<td>19</td>\n<td>Track 8 mute</td>\n</tr>\n<tr>\n<td>20</td>\n<td>Track 1 solo</td>\n</tr>\n<tr>\n<td>21</td>\n<td>Track 2 solo</td>\n</tr>\n<tr>\n<td>22</td>\n<td>Track 3 solo</td>\n</tr>\n<tr>\n<td>23</td>\n<td>Track 4 solo</td>\n</tr>\n<tr>\n<td>24</td>\n<td>Track 5 solo</td>\n</tr>\n<tr>\n<td>25</td>\n<td>Track 6 solo</td>\n</tr>\n<tr>\n<td>26</td>\n<td>Track 7 solo</td>\n</tr>\n<tr>\n<td>27</td>\n<td>Track 8 solo</td>\n</tr>\n</tbody>\n</table>\n<p>So for example, given these placeholder functions:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">sendNoteOn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  note<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  velocity<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  channel<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">sendNoteOff</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  note<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  velocity<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n  channel<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// the OMX-27 code uses delays between MIDI messages</span>\n<span class=\"token comment\">// probably just to keep the M8 from getting overloaded</span>\n<span class=\"token comment\">// with messages</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">delay</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>ms<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>We can control mutes / solos:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// mute track 1</span>\n<span class=\"token function\">sendNoteOn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>note<span class=\"token operator\">:</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span> velocity<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> channel<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">await</span> <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// solo track 2</span>\n<span class=\"token function\">sendNoteOn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>note<span class=\"token operator\">:</span> <span class=\"token number\">21</span><span class=\"token punctuation\">,</span> velocity<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> channel<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">await</span> <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// unsolo track 2</span>\n<span class=\"token function\">sendNoteOff</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>note<span class=\"token operator\">:</span> <span class=\"token number\">21</span><span class=\"token punctuation\">,</span> velocity<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> channel<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">await</span> <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Or move around the menus:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// press and hold shift</span>\n<span class=\"token function\">sendNoteOn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>note<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> velocity<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> channel<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">await</span> <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// press and release the left button 4 times</span>\n<span class=\"token comment\">// to move through the menu tree</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">sendNoteOn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>note<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> velocity<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> channel<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">sendNoteOff</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>note<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> velocity<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> channel<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// release the shift button</span>\n<span class=\"token function\">sendNoteOff</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>note<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> velocity<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> channel<span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">await</span> <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Launchpad</h2>\n<p>The M8 also supports interfacing with the Launchpad Pro and that includes being able to launch chains like Ableton’s clip view. I imagine it similarly works by sending/receiving MIDI notes since that’s typically how one programmatically controls Launchpads pads; for example from the <a href=\"https://fael-downloads-prod.focusrite.com/customer/prod/s3fs-public/downloads/LPP3_prog_ref_guide_200415.pdf\">programming reference guide</a>:</p>\n<blockquote>\n<p>Lighting the lower left pad static red:</p>\n<p>Host => Launchpad Pro [MK3]:</p>\n<p>Hex: 90h 0Bh 05h</p>\n<p>Dec: 144 11 5</p>\n<p>This is Note On, Channel 1, Note number 0Bh (11), with Velocity 05h (5). The Channel specifies the lighting mode (static), the Note number the pad to light (which is the lower left one in Programmer Mode), the Velocity the colour (which is Red, see Colour Palette).</p>\n</blockquote>\n<p>So I’m guessing how it works is:</p>\n<ol>\n<li>M8 sends a device indentification request</li>\n<li>LP sends a response</li>\n<li>M8 sends a bunch of messages to the LP indicating which pads should be lit and with what color using MIDI “note on” messages</li>\n<li>When an LP pad is pressed, the LP sends its own “note on” message to the M8</li>\n<li>M8 starts/stops the chain</li>\n<li>M8 sends a new “note on” message to update the state of the LP pad</li>\n</ol>\n<p>Unfortunately I don’t have a Launchpad Pro to try this.</p>\n<p>I’d love to reverse engineer the API to make a Norns script for this so that my Launchpad Minis would work with the M8, but until I can get more information on how the two devices are communicating I’m stuck.</p>","frontmatter":{"title":"Dirtywave M8 Basic MIDI Implementation","date":"April 06, 2025","description":"Looking at the OMX-27 to better understand the M8."}}},"pageContext":{"slug":"/m8-basic-midi/","previous":{"fields":{"slug":"/pro-micro-midi-interface/"},"frontmatter":{"title":"DIY MIDI Interface: USB to TRS"}},"next":null}},"staticQueryHashes":["63159454"]}