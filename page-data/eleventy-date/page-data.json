{"componentChunkName":"component---src-templates-blog-post-js","path":"/eleventy-date/","result":{"data":{"site":{"siteMetadata":{"title":"Tech Blog"}},"markdownRemark":{"id":"13671174-4959-5972-96de-b0ae20826cfd","excerpt":"For my new personal blog I’ve been playing around with 11ty. It’s definitely not perfect, but it’s a lot faster and more straight-forward than Gatsby (which is…","html":"<p>For my new personal blog I’ve been playing around with 11ty. It’s definitely not perfect, but it’s a lot faster and more straight-forward than Gatsby (which is what I use for this blog).</p>\n<p>My honeymoon period was cracked a little bit when I noticed the dates on my site were wrong due to a difference between local time and UTC. This is considered a common pitfall <a href=\"https://www.11ty.dev/docs/dates/#dates-off-by-one-day\">in the docs</a>, but they don’t offer a solution for Liquid in the docs or in the <a href=\"https://github.com/11ty/eleventy/issues/603\">original ticket</a>.</p>\n<p>Since this seemed like a common problem without a clear solution in a quick internet search, I thought I’d share what I did.</p>\n<p>Originally what I was doing:</p>\n<div class=\"gatsby-highlight\" data-language=\"liquid\"><pre class=\"language-liquid\"><code class=\"language-liquid\"><span class=\"token operator\">&lt;</span>div class<span class=\"token operator\">=</span>\"post<span class=\"token operator\">-</span>list__date\"<span class=\"token operator\">></span>\n  {{ post.data.date <span class=\"token operator\">|</span> <span class=\"token function\">date</span><span class=\"token operator\">:</span> \"<span class=\"token operator\">%</span>Y<span class=\"token operator\">-</span><span class=\"token operator\">%</span>m<span class=\"token operator\">-</span><span class=\"token operator\">%</span>d\" }}\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></code></pre></div>\n<p>The parser read “2025-03-07” as a UTC date and then converted it to a local date when formatting it in the template; so it rendered as “2025-03-06”.</p>\n<p>I ended up adding a custom filter:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// eleventy.config.js</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">frontPad</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">,</span> char <span class=\"token operator\">=</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> len <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> str <span class=\"token operator\">=</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      str <span class=\"token operator\">=</span> char <span class=\"token operator\">+</span> str<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> str<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">eleventyConfig</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...my other config stuff...</span>\n\n  eleventyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">addFilter</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dateString\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">date</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> year <span class=\"token operator\">=</span> date<span class=\"token punctuation\">.</span><span class=\"token function\">getUTCFullYear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> month <span class=\"token operator\">=</span> <span class=\"token function\">frontPad</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">getUTCMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> day <span class=\"token operator\">=</span> <span class=\"token function\">frontPad</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">getUTCDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>year<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>month<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>day<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then in the template:</p>\n<div class=\"gatsby-highlight\" data-language=\"liquid\"><pre class=\"language-liquid\"><code class=\"language-liquid\"><span class=\"token operator\">&lt;</span>div class<span class=\"token operator\">=</span>\"post<span class=\"token operator\">-</span>list__date\"<span class=\"token operator\">></span>\n  {{ post.data.date <span class=\"token operator\">|</span> dateString }}\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></code></pre></div>\n<p>So now a “2025-03-07” date actually renders as “2025-03-07”.</p>","frontmatter":{"title":"11ty Off-By-One Date","date":"March 05, 2025","description":"Quick note about off-by-one dates in Eleventy (11ty)."}}},"pageContext":{"slug":"/eleventy-date/","previous":{"fields":{"slug":"/fun-with-midi/"},"frontmatter":{"title":"Fun with MIDI"}},"next":null}}}